"use strict";(self.webpackChunkyourname=self.webpackChunkyourname||[]).push([[1468],{21468:function(e,n,t){t.r(n),t.d(n,{Unit:function(){return K},VisCRUD:function(){return B},VisHeader:function(){return y},Workspace:function(){return h}});var r=t(24047),i=t.n(r),o=t(86378),a=t.n(o),c=t(30577),l=t.n(c),s=t(11421),u=t(85694),d=t(79685),v=t(61947),f=t(20923),m=t(63342),p="vis-comp-wrokspace";var h=function(e){var n=e.formRef,t=void 0===n?void 0:n,r=e.showBread,o=e.breadcrumb,c=void 0===o?{}:o,h=e.footer,x=e.tabs,y=e.desc,j=e.initValue,b=e.value,k=e.children,g=e.onChange,C=e.formColumns,w=e.formProps,N=void 0===w?{}:w,Z=e.isUrlState,R=e.urlKey,S=void 0===R?"type":R,P=e.contentStyle,F=e.fixHeader,A=e.formRender,V=j||b||x[0].key,q=(0,v.Z)(),E=l()(q,2),z=E[0],B=E[1],H=(0,d.useState)(Z&&z[S]||V),K=l()(H,2),I=K[0],O=K[1],Y=x.find((function(e){return e.key===I}))||x[0];return(0,d.useEffect)((function(){b&&O(b)}),[b]),(0,m.jsxs)("div",{className:"".concat(p,"-wrap"),children:[(0,m.jsxs)("div",{className:"".concat(p,"-header"),children:[r&&(0,m.jsx)("div",{style:{height:"30px"},children:(0,m.jsx)(s.H_,a()({},c))}),(0,m.jsx)("div",{className:"".concat(p,"-title"),children:1===x.length?(0,m.jsx)("div",{className:"".concat(p,"-label"),children:x[0].title}):(0,m.jsx)(f.Z,{className:"".concat(p,"-tabs"),activeKey:I,onChange:function(e){var n=x.find((function(n){return n.key===e}));g&&n&&g(n),O(e),Z&&B(i()({},S,e))},size:"small",items:x.map((function(e){return{label:e.title,key:e.key,children:void 0}}))})}),y&&(0,m.jsx)("div",{className:"".concat(p,"-desc"),children:y}),(0,m.jsx)("div",{className:"".concat(p,"-form"),children:A?A(Y):(0,m.jsx)(u.Z,a()({formRef:t,columns:C||[],submitter:!1,layout:"inline"},N))})]}),k?k(Y):(0,m.jsx)("div",{className:"".concat(p,"-content-wrap"),style:a()(a()({},P),{},{flex:F?"1":"none"}),children:null==Y?void 0:Y.content}),h&&(0,m.jsx)("div",{className:"".concat(p,"-content-footer"),children:h})]})},x="vis-comp-header";var y=function(e){var n=e.formRef,t=void 0===n?void 0:n,r=e.tabs,i=e.initValue,o=e.value,c=e.tabBarExtraContent,s=e.children,v=e.onChange,p=e.formColumns,h=e.formProps,y=void 0===h?{}:h,j=e.contentStyle,b=e.style,k=e.formRender,g=i||o||r[0].key,C=(0,d.useState)(g),w=l()(C,2),N=w[0],Z=w[1],R=r.find((function(e){return e.key===N}))||r[0];return(0,d.useEffect)((function(){o&&Z(o)}),[o]),(0,m.jsxs)("div",{className:"".concat(x,"-wrap"),style:b,children:[(0,m.jsxs)("div",{className:"".concat(x,"-header ").concat(1!==r.length&&"tabs"),children:[(0,m.jsx)("div",{className:"".concat(x,"-title"),children:1===r.length?(0,m.jsx)("div",{className:"".concat(x,"-label"),children:r[0].title}):(0,m.jsx)(f.Z,{className:"".concat(x,"-tabs"),activeKey:N,tabBarExtraContent:c,onChange:function(e){var n=r.find((function(n){return n.key===e}));v&&n&&v(n),Z(e)},size:"small",items:null==r?void 0:r.map((function(e){return a()({label:e.title,children:void 0},e)}))})}),(0,m.jsx)("div",{className:"".concat(x,"-form"),children:k?k(R):(0,m.jsx)(u.Z,a()({formRef:t,columns:p||[],submitter:!1,layout:"inline"},y))})]}),s?s(R):(0,m.jsx)("div",{className:"".concat(x,"-content-wrap"),style:j,children:null==R?void 0:R.content})]})},j=t(90967),b=t.n(j),k=t(58357),g=t.n(k),C=t(28488),w=t.n(C),N=t(71977),Z=t.n(N),R=t(60587),S=t(70298),P=t(91957),F=t(22850),A=t(14067),V=t(38584),q=t(32699),E=["pageSize","current"],z=[{title:"名称",dataIndex:"name",valueType:"text"},{title:"类型",dataIndex:"type",valueType:"text"}];var B=function(e){var n=e.columns,t=void 0===n?z:n,r=e.tableRequest,i=e.prefixApi,o=void 0===i?"/api/table":i,c=e.addFormProps,s=void 0===c?{}:c,v=e.editFormProps,f=void 0===v?{}:v,p=e.addColumns,h=e.editColumns,x=e.editHandle,y=e.addHandle,j=e.request,k=void 0===j?fetch:j,C=e.tableProps,N=void 0===C?{}:C,B=e.columnActions,H=e.modalFooterAction,K=e.primaryKey,I=void 0===K?"id":K,O=e.formRef,Y=e.showDeleteAction,T=void 0===Y||Y,U=e.showEditAction,D=void 0===U||U,Q=e.showAddToolbar,G=void 0===Q||Q,L=e.toolBars,W=void 0===L?[]:L,_=e.tableRef,J=e.requestParams,M=void 0===J?{}:J,X=e.tableRequestParams,$=void 0===X?{}:X,ee=(0,d.useRef)(),ne=(0,d.useRef)(),te=(0,d.useState)(),re=l()(te,2),ie=re[0],oe=re[1],ae=(0,d.useCallback)(function(){var e=Z()(g()().mark((function e(n){var t,r,i,c;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.pageSize,r=n.current,i=w()(n,E),e.next=3,k(o+"/query/page",{method:"post",data:a()(a()(a()({pageIndex:r,pageSize:t},i),M),$)});case 3:return c=e.sent,e.abrupt("return",{total:c.total,data:c.records,success:!0});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[o,M]),ce={title:"操作",hideInSearch:!0,render:function(e,n){return[null==B?void 0:B(n),D&&(x?(0,m.jsx)(P.Z,{onClick:function(){return x(n)},type:"link",children:"编辑"}):(0,m.jsx)(P.Z,{type:"link",onClick:function(){oe(n)},children:"编辑"})),T&&(0,m.jsx)(P.Z,{danger:!0,type:"text",onClick:function(){F.Z.confirm({title:"提示",content:"该操作会删除该项数据，是否继续？",onOk:function(){return Z()(g()().mark((function e(){var t,r,i;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(o+"/delete",{method:"post",data:a()({ids:[n[I]]},M)});case 2:A.ZP.success("删除成功!"),null===(t=_||ne)||void 0===t||null===(r=t.current)||void 0===r||null===(i=r.reloadAndRest)||void 0===i||i.call(r);case 4:case"end":return e.stop()}}),e)})))()}})},children:"删除"})]}};return(0,m.jsxs)("div",{children:[(0,m.jsx)(F.Z,{title:"编辑表单",open:!!ie,onCancel:function(){oe(void 0)},destroyOnClose:!0,footer:[(0,m.jsx)("span",{children:null==H?void 0:H((function(){var e;return null===(e=(O||ee).current)||void 0===e?void 0:e.getFieldsValue()}))},0),(0,m.jsx)(P.Z,{type:"default",onClick:function(){return oe(void 0)},children:"取消"},1),(0,m.jsx)(P.Z,{type:"primary",onClick:Z()(g()().mark((function e(){var n,t,r,i,c;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(O||ee).current)||void 0===n?void 0:n.validateFields();case 2:if(!(t=e.sent)){e.next=9;break}return e.next=6,k(o+"/update",{method:"post",data:a()(a()({},t),{},{id:ie.id},M)});case 6:A.ZP.success("编辑成功!"),null===(r=_||ne)||void 0===r||null===(i=r.current)||void 0===i||null===(c=i.reloadAndRest)||void 0===c||c.call(i),oe(void 0);case 9:case"end":return e.stop()}}),e)}))),children:"确定"},2)],width:800,children:(0,m.jsx)(u.Z,a()(a()({columns:h||t},f),{},{initialValues:ie,formRef:O||ee,submitter:!1}))}),(0,m.jsx)(R.Z,a()({columns:t.concat(ce),request:r||ae,actionRef:_||ne,rowKey:I,toolBarRender:function(){return[].concat(b()(W),[G&&(y?(0,m.jsx)(P.Z,{type:"primary",onClick:y,children:"新增"}):(0,m.jsx)(S.Y,{title:"新建表单",modalProps:{destroyOnClose:!0},onFinish:Z()(g()().mark((function e(){var n,t,r,i,c;return g()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(O||ee).current)||void 0===n?void 0:n.validateFields();case 2:if(t=e.sent,(0,q.isEmpty)(t)){e.next=9;break}return e.next=6,k(o+"/add",{method:"post",data:a()(a()({},t),M)});case 6:return A.ZP.success("新增成功!"),null===(r=_||ne)||void 0===r||null===(i=r.current)||void 0===i||null===(c=i.reloadAndRest)||void 0===c||c.call(i),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),trigger:(0,m.jsx)(P.Z,{onClick:function(){(null==O?void 0:O.current)&&(O.current=(O||ee).current)},icon:(0,m.jsx)(V.Z,{}),type:"primary",children:"新建"},"button"),submitter:{render:function(e,n){return[null==H?void 0:H((function(){var e,n;return null===(e=O||ee)||void 0===e||null===(n=e.current)||void 0===n?void 0:n.getFieldsValue()}))].concat(b()(n))}},children:(0,m.jsx)(u.Z,a()(a()({columns:p||t},s),{},{submitter:!1,formRef:O||ee}))}))])}},N))]})},H=t(5336);var K=function(e){var n=e.data,t=e.show,r=e.numberConversion,i=e.pointLength,o=e.useGrouping,a=void 0!==o&&o,c=e.numStyle,l=e.unitStyle,s=(0,m.jsx)("span",{children:(0,H.Y4)(n,a)});if(r&&(0,H.hj)(n)){var u=(0,H.eQ)(n,i),d=null==u?void 0:u.num,v=null==u?void 0:u.unit,f=(0,H.Y4)(d,a);s=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{children:f}),(0,m.jsx)("span",{style:l,children:v})]})}return t?(0,m.jsx)("div",{style:c,children:s}):null}},5336:function(e,n,t){t.d(n,{Y4:function(){return c},eQ:function(){return o},hj:function(){return a}});var r=function(e){var n=e.toString(),t=n.indexOf("."),r=n;return-1!==t&&(r=n.substring(0,t)),r.length},i=function(e,n){var t=String(e);return e<n&&!t.includes(".")},o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(void 0!==e){var t=["","万","亿","万亿"],o=1e4,a=Number(e),c=i(a,o);if(isNaN(a))return{num:"",unit:""};for(var l=t[0],s=0;s<4&&(l=t[s],!(r(a)<5));s++)a/=o;return{num:0===e||c?a:a.toFixed(n),unit:l}}return!1},a=function(e){return"boolean"!=typeof e&&"number"==typeof+e&&!isNaN(e)},c=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e;if(e&&a(e)&&n){var r=e.toString().split(".");if(r){var i,o,c,l,s,u,d,v,f=null===(i=r[0])||void 0===i||null===(o=i.split(""))||void 0===o||null===(c=o.reverse())||void 0===c||null===(l=c.join(""))||void 0===l||null===(s=l.match(/(\d{1,3})/g))||void 0===s||null===(u=s.join(","))||void 0===u||null===(d=u.split(""))||void 0===d||null===(v=d.reverse())||void 0===v?void 0:v.join("");t=r[1]?"".concat(f,".").concat(r[1]):f}}return t}}}]);